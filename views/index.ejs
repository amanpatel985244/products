<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>project</title>
    <!-- <link rel="stylesheet" href="/stylesheet/style.css"> -->
    <script src="https://unpkg.com/@tailwindcss/browser@4"></script>
</head>
<body>
   <div class="main w-full min-h-screen bg-zinc-900 text-white">
    <div class="form p-10">
        <form action="/create" method="post">
            <input class="block px-5 py-2  bg-zinc-700 w-full rounded-md outline-none" type="text" placeholder="Title goes..." name="title" >
            <textarea class="block mt-2 px-5 py-2 resize-none bg-zinc-700 w-full rounded-md" name="details" placeholder="Write your tasks detail here...."></textarea>            <input  class="mt-2  bg-blue-600 px-5 py-2 rounded-md" type="submit" value="Create Task">
        </form>
    </div>
    <div class="tasks p-10 flex gap-3 flex-wrap">
        <% if(files.length>0){ %>
            <% files.forEach(function(val){ %>
                <%  nval = val.split('.txt').join('')%>
                <%  nval = nval.split('_').join(' ')%>
                <!-- <div class="task min-w-72 px-3 py-4 bg-zinc-700 rounded-md ">
                    <h1 class="text-3xl tracking-tighter"><%= nval %></h1>
                    <a class="text-blue-500 mt-3" href="/file/<%= val %>">Read more..</a>
                    
                    
                </div> -->
                <div class="task min-w-72 px-3 py-4 bg-zinc-700 rounded-md flex items-center">
                    <div class="flex-grow">
                        <h1 class="text-3xl tracking-tighter"><%= nval %></h1>
                        <a class="text-blue-500 mt-3 block" href="/file/<%= val %>">Read more..</a>
                    </div>
                    <div class="flex items-center">
                        <button onclick="toggleTask(this)" class="mr-4 text-green-500 hover:text-green-700">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 task-toggle-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                            </svg>
                        </button>
                        <form action="/delete/<%= val %>" method="POST">
                            <button type="submit" class="text-red-500 hover:text-red-700">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                </svg>
                            </button>
                        </form>
                    </div>
                </div>
                <% })%>
       <% } else{ %>
        <h3 class="text-zinc-600">NO TASKS YET</h3>
       <% } %>
        
       
    
    </div>
    
   </div>
   <script>
    function toggleTask(button) {
        const taskCard = button.closest('.task');
        const icon = button.querySelector('.task-toggle-icon');
        
        taskCard.classList.toggle('opacity-50');
        taskCard.classList.toggle('line-through');
        
        if (icon.getAttribute('fill') === 'currentColor') {
            icon.setAttribute('fill', 'none');
            icon.setAttribute('stroke', 'currentColor');
        } else {
            icon.setAttribute('fill', 'currentColor');
            icon.setAttribute('stroke', 'none');
        }
    }
    </script>
    <!-- <script src="/javascript/script.js"></script> -->
</body>
</html>